id: cinder-vmware
resources:
- id: role_data{{index}}
  from: f2s/resources/role_data
  location: '{{node}}'
  values:
    env: '{{env}}'
    uid: '{{index}}'
- id: fuel_pkgs{{index}}
  from: f2s/resources/fuel_pkgs
  location: '{{node}}'
  values_from: role_data{{index}}
- id: logging{{index}}
  from: f2s/resources/logging
  location: '{{node}}'
  values_from: role_data{{index}}
- id: tools{{index}}
  from: f2s/resources/tools
  location: '{{node}}'
  values_from: role_data{{index}}
- id: netconfig{{index}}
  from: f2s/resources/netconfig
  location: '{{node}}'
  values_from: role_data{{index}}
- id: connectivity_tests{{index}}
  from: f2s/resources/connectivity_tests
  location: '{{node}}'
  values_from: role_data{{index}}
- id: firewall{{index}}
  from: f2s/resources/firewall
  location: '{{node}}'
  values_from: role_data{{index}}
- id: ssl-keys-saving{{index}}
  from: f2s/resources/ssl-keys-saving
  location: '{{node}}'
  values_from: role_data{{index}}
- id: ssl-add-trust-chain{{index}}
  from: f2s/resources/ssl-add-trust-chain
  location: '{{node}}'
  values_from: role_data{{index}}
- id: hosts{{index}}
  from: f2s/resources/hosts
  location: '{{node}}'
  values_from: role_data{{index}}
- id: openstack-cinder{{index}}
  from: f2s/resources/openstack-cinder
  location: '{{node}}'
  values_from: role_data{{index}}
- id: top-role-cinder-vmware{{index}}
  from: f2s/resources/top-role-cinder-vmware
  location: '{{node}}'
  values_from: role_data{{index}}
events:
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: fuel_pkgs{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: logging{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: tools{{index}}.run
- type: depends_on
  state: success
  parent_action: logging{{index}}.run
  depend_action: tools{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: netconfig{{index}}.run
- type: depends_on
  state: success
  parent_action: tools{{index}}.run
  depend_action: netconfig{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: connectivity_tests{{index}}.run
- type: depends_on
  state: success
  parent_action: netconfig{{index}}.run
  depend_action: connectivity_tests{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: firewall{{index}}.run
- type: depends_on
  state: success
  parent_action: netconfig{{index}}.run
  depend_action: firewall{{index}}.run
- type: depends_on
  state: success
  parent_action: connectivity_tests{{index}}.run
  depend_action: firewall{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: ssl-keys-saving{{index}}.run
- type: depends_on
  state: success
  parent_action: firewall{{index}}.run
  depend_action: ssl-keys-saving{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: ssl-add-trust-chain{{index}}.run
- type: depends_on
  state: success
  parent_action: firewall{{index}}.run
  depend_action: ssl-add-trust-chain{{index}}.run
- type: depends_on
  state: success
  parent_action: ssl-keys-saving{{index}}.run
  depend_action: ssl-add-trust-chain{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: hosts{{index}}.run
- type: depends_on
  state: success
  parent_action: netconfig{{index}}.run
  depend_action: hosts{{index}}.run
- type: depends_on
  state: success
  parent_action: connectivity_tests{{index}}.run
  depend_action: hosts{{index}}.run
- type: depends_on
  state: success
  parent_action: ssl-add-trust-chain{{index}}.run
  depend_action: hosts{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent_action: firewall{{index}}.run
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent_action: hosts{{index}}.run
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=cinder-keystone
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=keystone
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=rabbitmq
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=cinder-db
  depend_action: openstack-cinder{{index}}.run
- type: depends_on
  state: success
  parent_action: role_data{{index}}.run
  depend_action: top-role-cinder-vmware{{index}}.run
- type: depends_on
  state: success
  parent_action: openstack-cinder{{index}}.run
  depend_action: top-role-cinder-vmware{{index}}.run
